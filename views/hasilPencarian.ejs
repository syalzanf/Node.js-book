<%- include ('layout/header') %>
<%- include ('layout/nav') %>
<head>
    <style>
              /* CSS untuk styling tabel data buku */
              .buku-table {
            width: 100%;
            border: 1px solid rgb(0, 145, 241);
            border-collapse: collapse;
            /* Tambahkan gaya lain sesuai kebutuhan Anda */
        }

        .buku-table th{
            border: 1px solid rgb(0, 145, 241);    
            padding: 8px;
            text-align: center;
        }
        .buku-table td {
            border: 1px solid rgb(0, 153, 255);    
            padding: 8px;
            text-align: left;
        }

        .buku-table th {
            background-color: rgb(0, 153, 255);
            color: #fff;
            /* Gaya untuk header kolom */
        }
        
        .buku-table tr:hover{
            background-color: rgb(110, 196, 253);
            color: #fff;
        }
        .form-table {
            width: 70%;
            border-collapse: collapse;
            margin: 20px;
            /* Tambahkan gaya lain sesuai kebutuhan Anda */
        }
        .form-table td {   
            padding: 4px;
            text-align: left;
        }
        .form-btn {
            border-radius: 2px  ;
            background-color: rgb(87, 187, 253);
            border: none;
            color: #FFFFFF;
            text-align: center;
            font-size: 15px;
            padding: 5px;
            width: 100px;   
            cursor: pointer;
            margin: 2px;
        }

        .form-btn:hover {
            background-color: rgb(71, 170, 236);
        }
        .input-field {
            width: 80%;
            padding: 1px;
            outline: none;
            border: 1 solid rgb(212, 212, 212);
        }

        .input-field:focus {
            border: 2px solid rgb(71, 170, 236);
        }
        .container-title {
            background-color: #f2f2f2; /* Warna latar belakang */
            padding: 1px; /* Ruang di sekitar teks */
            margin-top: 1px; /* Jarak antara container dan elemen berikutnya */
            width: 100%; /* Mengatur lebar elemen menjadi 100% lebar kontennya */
            text-align: left; /* Mengatur teks menjadi tengah */
            position: relative; /* Mengatur posisi relatif untuk mengontrol posisi elemen */
            left: 0; /* Mengatur posisi kiri ke 0 untuk memastikan elemen dimulai dari sisi kiri */
        }

        .container-title p {
            font-size: 15px; /* Ukuran teks "Tambah Buku" */
            margin: 0; /* Menghapus margin bawaan dari <h2> */
        }
        .btn-delete {
            background-color: #c50d00; /* Green background for delete */
        }
        .btn-delete:hover {
            background-color: #f30000; /* Green background for delete */
        }

        .btn-tambah-stok {
            background-color: #007710; /* Blue background for tambah stok */
        }
        .btn-tambah-stok:hover {
            background-color: #009414 ; /* Blue background for tambah stok */
        }

        .btn-group button {
            border: 1px; 
            color: rgb(255, 255, 255); /* White text for all buttons */
            padding: 10px 24px; /* Some padding for all buttons */
            cursor: pointer; /* Pointer/hand icon for all buttons */
            float: left; /* Float the buttons side by side */
            margin-right: 10px; /* Add margin to create space between buttons */
        }

        /* Clear floats (clearfix hack) */
        .btn-group:after {
            content: "";
            clear: both;
            display: table;
        }

        .btn-group button:last-child {
            margin-right: 20px; /* Remove margin for the last button */
        }
    </style>
</head>

<div class="content">
        <!-- Form Edit Data Buku (Hasil Pencarian) -->
        <% if (hasilPencarian.length > 0) { %>
                <div class="container-title">
                    <p>Update Buku</p>
                </div>
            <form action="/update-buku/<%= hasilPencarian[0].kode_buku %>" method="POST">
                <table  class="form-table">  
                    <tr>
                        <td><label for="kodeBuku">Kode Buku:</label></td>
                        <td><input  class="input-field" type="text" name="kodeBuku" value="<%= hasilPencarian[0].kode_buku %>" required></td>
                        <td>Penerbit:</td>
                        <td><input  class="input-field" type="text" name="penerbit" value="<%= hasilPencarian[0].penerbit %>" required></td>
                        <td>Stok:</td>
                        <td><input  class="input-field" type="text" name="stok" value="<%= hasilPencarian[0].stok %>" required></td>
                    </tr>
                    <tr>
                        <td> <label for="judul">Judul:</label></td>
                        <td><input class="input-field" type="text" name="judul" value="<%= hasilPencarian[0].judul %>" required></td>
                        <td>Tahun:</td>
                        <td><input class="input-field" type="text" name="tahun" value="<%= hasilPencarian[0].tahun %>" required></td>
                    </tr>
                    <tr>
                        <td>No. ISBN:</td>
                        <td><input class="input-field" type="text" name="noISBN"  value="<%= hasilPencarian[0].no_isbn %>" required></td>
                        <td>Harga Pokok:</td>
                        <td><input class="input-field" type="number" name="hargaPokok" value="<%= hasilPencarian[0].hrg_pokok %>" required></td>
                    </tr>
                    <tr>
                        <td>Penulis:</td>
                        <td><input class="input-field" type="text" name="penulis" value="<%= hasilPencarian[0].penulis %>" required></td>
                        <td>Harga Jual:</td>
                        <td><input class="input-field" type="number" name="hargaJual"  value="<%= hasilPencarian[0].hrg_jual %>" required></td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <button  class="form-btn" type="submit" name="aksi" required>Simpan</button>
                        </td>
                    </tr>
                </table>
            </form>
       


    <!-- Tampilkan data buku yang dicari -->
    <table class="buku-table">
        <tr>
            <th>Kode Buku</th>
            <th>Judul</th>
            <th>No. ISBN</th>
            <th>Penulis</th>
            <th>Penerbit</th>
            <th>Tahun</th>
            <th>Stok</th>
            <th>Harga Pokok</th>
            <th>Harga Jual</th>
            <th colspan="3">Aksi</th>
        </tr>
        <% hasilPencarian.forEach(buku => { %>
            <tr>
                <td><%= buku.kode_buku %></td>
                <td><%= buku.judul %></td>
                <td><%= buku.no_isbn %></td>
                <td><%= buku.penulis %></td>
                <td><%= buku.penerbit %></td>
                <td><%= buku.tahun %></td>
                <td><%= buku.stok %></td>
                <td><%= buku.hrg_pokok %></td>
                <td><%= buku.hrg_jual %></td>
                <td>
                    <center><div class="btn-group">
                        <button class="btn-delete" onclick="return confirm('Apakah Anda yakin ingin menghapus buku ini?')">Hapus</button>
                    </div></center>
                </td>
            </tr>
            <% }); %>
    </table>
    <% } else { %>
        <script>
            alert("Buku tidak ditemukan. Kembali ke halaman dataBuku.");
            // You can also redirect the user to another page or perform other actions as needed
            window.location.href = "/dataBuku"; // Redirect to riwayatTransaksi page
        </script>
    <% } %>
</div>

<script>
    // JavaScript untuk menampilkan form edit
    function showEditForm(kodeBuku) {
        // Semua form edit disembunyikan
        const allEditForms = document.querySelectorAll(".form-edit");
        allEditForms.forEach(form => {
            form.style.display = "none";
        });

        // Tampilkan form edit yang sesuai berdasarkan kode buku
        const formId = `editForm_${kodeBuku}`;
        const editForm = document.getElementById(formId);
        if (editForm) {
            editForm.style.display = "block";
        }
    }
</script>
<%- include ('layout/footer') %>



